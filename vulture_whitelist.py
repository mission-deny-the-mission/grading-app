"""Whitelist for Vulture to acknowledge dynamically used tasks and helpers.

These symbols are invoked through the desktop task queue, Flask blueprints,
and tests rather than direct imports, so Vulture would otherwise flag them
as unused. Add new tasks/helpers here when they are dispatched dynamically.
"""

from tasks import (
    MockCelery,
    MockCeleryTask,
    MockDelay,
    assess_image_quality,
    cancel_batch_processing,
    cleanup_completed_batches,
    cleanup_old_files,
    clear_test_app,
    pause_batch_processing,
    process_batch,
    process_batch_with_priority,
    process_image_ocr,
    process_job,
    process_job_sync,
    process_submission_task,
    resume_batch_processing,
    retry_batch_failed_jobs,
    set_test_app,
    update_batch_progress,
)
from routes import (
    admin_routes,
    api,
    auth_pages,
    auth_routes,
    batches,
    config_routes,
    desktop_data,
    desktop_settings,
    export as export_routes,
    grading,
    grading_ui,
    legacy_auth_redirects,
    main,
    projects_routes,
    scheme_document,
    scheme_sharing,
    schemes,
    schemes_ui,
    sharing_routes,
    templates,
    upload,
    usage_routes,
)
from middleware import auth_middleware

# Explicit references to mark these as used for Vulture
_used_callables = [
    process_job,
    process_batch,
    process_job_sync,
    process_batch_with_priority,
    update_batch_progress,
    cleanup_completed_batches,
    cleanup_old_files,
    process_image_ocr,
    assess_image_quality,
    process_submission_task,
    retry_batch_failed_jobs,
    pause_batch_processing,
    resume_batch_processing,
    cancel_batch_processing,
    set_test_app,
    clear_test_app,
    MockCeleryTask.apply_async,
    MockCeleryTask.retry,
    MockDelay.__call__,
    MockCelery.send_task,
]

__all__ = [getattr(fn, "__name__", str(fn)) for fn in _used_callables]

# Flask route handlers are registered via blueprints; reference them here so
# Vulture knows they are used.
_route_refs = [
    admin_routes.get_user,
    admin_routes.update_user_role,
    admin_routes.update_user_quotas,
    api.get_provider_models,
    api.get_all_models,
    api.api_jobs,
    api.api_batches,
    api.api_job_detail,
    api.api_job_submissions,
    api.api_submission_detail,
    api.export_job_results,
    api.trigger_job_processing,
    api.retry_submission,
    api.get_saved_prompts,
    api.create_saved_prompt,
    api.get_saved_prompt,
    api.update_saved_prompt,
    api.delete_saved_prompt,
    api.get_saved_marking_schemes,
    api.create_saved_marking_scheme,
    api.api_get_templates,
    api.api_create_template,
    api.api_get_template,
    api.api_update_template,
    api.api_delete_template,
    api.api_get_template_categories,
    api.api_clone_template,
    api.api_get_template_analytics,
    api.api_get_batches,
    api.api_get_batch,
    api.api_update_batch,
    api.api_delete_batch,
    api.api_start_batch,
    api.api_pause_batch,
    api.api_resume_batch,
    api.api_cancel_batch,
    api.api_retry_batch,
    api.api_duplicate_batch,
    api.api_archive_batch,
    api.api_get_batch_jobs,
    api.api_add_jobs_to_batch,
    api.api_create_job_in_batch,
    api.api_create_job_in_batch_with_files,
    api.api_get_available_jobs_for_batch,
    api.api_get_batch_settings,
    api.api_remove_job_from_batch,
    api.api_export_batch,
    api.api_batch_analytics,
    api.api_get_batch_templates,
    api.api_create_batch_template,
    api.api_get_batch_template,
    api.get_saved_marking_scheme,
    api.update_saved_marking_scheme,
    api.delete_saved_marking_scheme,
    api.upload_image,
    api.get_submission_images,
    api.get_image,
    api.download_image,
    api.get_image_ocr,
    api.delete_image,
    api.get_image_quality,
    auth_pages.login_page,
    auth_pages.register_page,
    auth_routes.login,
    auth_routes.logout,
    auth_routes.get_session,
    auth_routes.register,
    auth_routes.request_password_reset,
    auth_routes.reset_password,
    auth_routes.get_current_user,
    batches.batch_detail,
    batches.create_batch,
    batches.create_job,
    config_routes.get_deployment_mode,
    config_routes.set_deployment_mode,
    config_routes.health_check,
    desktop_data.show_data_management,
    desktop_data.export_all_data,
    desktop_data.import_all_data,
    desktop_settings.show_settings,
    desktop_settings.update_api_keys,
    desktop_settings.delete_api_key_route,
    desktop_settings.open_logs_folder,
    export_routes.export_scheme,
    export_routes.download_scheme,
    export_routes.import_scheme,
    grading.create_submission,
    grading.get_submission,
    grading.update_submission,
    grading.create_evaluation,
    grading.update_evaluation,
    grading_ui.grade_submission,
    grading_ui.not_found,
    grading_ui.internal_error,
    legacy_auth_redirects.login_redirect,
    legacy_auth_redirects.register_redirect,
    main.setup,
    main.index,
    main.save_config,
    main.load_config,
    main.export_config,
    main.import_config,
    main.test_api_key,
    main.test_lm_studio,
    main.test_ollama,
    main.job_detail,
    main.bulk_upload,
    main.saved_configurations,
    main.submission_images,
    projects_routes.list_projects,
    projects_routes.get_project,
    projects_routes.update_project,
    projects_routes.delete_project,
    scheme_document.upload_document,
    scheme_document.get_conversion_status,
    scheme_document.get_conversion_result,
    scheme_document.accept_conversion,
    scheme_sharing.share_scheme,
    scheme_sharing.bulk_share_scheme,
    scheme_sharing.list_shares,
    scheme_sharing.list_shared_schemes,
    schemes.create_scheme,
    schemes.list_schemes,
    schemes.get_scheme,
    schemes.update_scheme,
    schemes.delete_scheme,
    schemes.add_question,
    schemes.update_question,
    schemes.delete_question,
    schemes.reorder_questions,
    schemes.add_criterion,
    schemes.update_criterion,
    schemes.delete_criterion,
    schemes.reorder_criteria,
    schemes.clone_scheme,
    schemes.get_statistics,
    schemes.validate_scheme_endpoint,
    schemes_ui.list_schemes,
    schemes_ui.view_scheme,
    schemes_ui.create_scheme,
    schemes_ui.edit_scheme,
    schemes_ui.view_statistics,
    schemes_ui.clone_scheme_form,
    schemes_ui.not_found,
    schemes_ui.internal_error,
    sharing_routes.get_shared_with_me,
    templates.templates_page,
    templates.create_template,
    upload.upload_file,
    upload.upload_marking_scheme,
    upload.upload_bulk,
    usage_routes.get_usage,
    usage_routes.get_quotas,
    usage_routes.get_usage_reports,
    auth_middleware.require_login,
]
